webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),i=n("mvHQ"),o=n.n(i),s=n("Zrlr"),r=n.n(s),c=n("wxAW"),u=n.n(c),l=n("2fyi"),h=n.n(l),d={clientId:"Me5FP8FE20RtsbqPNJ26NKQqLdgaxXoX",domain:"echo-systeme.eu.auth0.com",callbackUrl:"http://localhost:8080/callback",apiUrl:"https://echo-systeme.eu.auth0.com/api/v2/"},p=n("CpNC"),m=n("/ocq"),f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.authenticated?n("h4",[t._v("\n      You are logged in!\n  ")]):t._e(),t._v(" "),t.authenticated?t._e():n("h4",[t._v("\n    You are not logged in! Please "),n("a",{on:{click:function(e){t.auth.login()}}},[t._v("Log In")]),t._v(" to continue.\n  ")])])},staticRenderFns:[]};var v=n("VU/8")({name:"home",props:["auth","authenticated"]},f,!1,function(t){n("oILQ")},null,null).exports,_={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner"},[e("p",[this._v("SPINNING")])])}]},g=n("VU/8")({name:"callback",props:["auth"],data:function(){return this.auth.handleAuthentication(),{}}},_,!1,null,null,null).exports,k={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("Liste des projets")])])}]},I=n("VU/8")({name:"projects",data:function(){return{}}},k,!1,null,null,null).exports;a.a.use(m.a);var b=new m.a({mode:"history",routes:[{path:"/home",name:"Home",component:v},{path:"/callback",name:"Callback",component:g},{path:"/projects",name:"Projects",component:I,meta:{requiresAuth:!0}},{path:"*",redirect:"/home"}]}),N=new(function(){function t(){r()(this,t),this.authenticated=this.isAuthenticated(),this.authNotifier=new p.a,this.auth0=new h.a.WebAuth({domain:d.domain,clientID:d.clientId,redirectUri:d.callbackUrl,audience:"https://"+d.domain+"/userinfo",responseType:"token id_token",scope:"openid"}),this.login=this.login.bind(this),this.setSession=this.setSession.bind(this),this.logout=this.logout.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this)}return u()(t,[{key:"login",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var t=this;this.auth0.parseHash(function(e,n){n&&n.accessToken&&n.idToken?(t.setSession(n),b.replace("home")):e&&(b.replace("home"),console.log(e),alert("Error: "+e.error+". Check the console for further details."))})}},{key:"setSession",value:function(t){var e=o()(1e3*t.expiresIn+(new Date).getTime());localStorage.setItem("access_token",t.accessToken),localStorage.setItem("id_token",t.idToken),localStorage.setItem("expires_at",e),this.authNotifier.emit("authChange",{authenticated:!0})}},{key:"logout",value:function(){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),this.userProfile=null,this.authNotifier.emit("authChange",!1),b.replace("home")}},{key:"isAuthenticated",value:function(){var t=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<t}}]),t}()),S=N.login,y=N.logout,A=N.authenticated,w=N.authNotifier,x={name:"app",data:function(){var t=this;return w.on("authChange",function(e){t.authenticated=e.authenticated}),{auth:N,authenticated:A}},methods:{login:S,logout:y}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" "),t.authenticated?t._e():n("button",{on:{click:function(e){t.login()}}},[t._v("Log In")]),t._v(" "),t.authenticated?n("button",{on:{click:function(e){t.logout()}}},[t._v("Log Out")]):t._e(),t._v(" "),n("div",{staticClass:"container"},[n("router-view",{attrs:{auth:t.auth,authenticated:t.authenticated}})],1)],1)},staticRenderFns:[]};var E=n("VU/8")(x,C,!1,function(t){n("cZff")},null,null).exports;a.a.config.productionTip=!1,new a.a({el:"#app",router:b,components:{App:E},template:"<App/>"})},cZff:function(t,e){},oILQ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.04b592de2710b1f7ddd0.js.map